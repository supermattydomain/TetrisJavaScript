"use strict";(function(a){a(function(){var i=10,g=20,d=a("#stopGoButton"),h=a("#resetButton"),b=new Tetris.NextShapeDisplay(a("#nextShape")),c=a("#board"),e=new Tetris.Board(i,g,c),j=a("#speedSlider");var f={32:function(){e.drop()},37:function(){e.moveLeft()},38:function(){e.rotate(false)},39:function(){e.moveRight()},40:function(){e.fall()}};a("button, input[type=button], input[type=checkbox]").button();a(document).on("keydown",function(k){if(!e.isRunning()){return false}if((k.which||k.keyCode) in f){f[k.which||k.keyCode]();k.preventDefault();return true}return false});a(document).on("swipeleft",function(){e.moveLeft()});a(document).on("swiperight",function(){e.moveRight()});c.on("tap",function(){e.rotate(false)});c.on("taphold",function(){e.fall()});d.on("click",function(){e.toggleRunning();c.focus();a(document).focus()});h.on("click",function(){e.stop();d.removeAttr("disabled");e.clear();c.focus();a(document).focus()});j.on("slidestop",function(k,l){e.setDelay(Tetris.delay(j.val()));c.focus();a(document).focus()});c.on(Tetris.eventNames.rowsZapped,function(k,m){var l=j.val();Tetris.sounds.rowsZapped.play();l++;e.setDelay(Tetris.delay(l));j.val(l);j.slider("refresh")});c.on(Tetris.eventNames.nextShapeChanged,function(l,k){b.display(k)});c.on(Tetris.eventNames.shapeShowBlocked,function(k){e.stop();b.clear();d.attr("disabled","disabled");Tetris.sounds.shapeShowBlocked.play();a().toastmessage("showNoticeToast","Game over")});c.on(Tetris.eventNames.boardStarted,function(){d.val("Pause")});c.on(Tetris.eventNames.boardStopped,function(){d.val("Resume")});c.on(Tetris.eventNames.shapeFallBlocked,function(){Tetris.sounds.shapeFallBlocked.play()});e.setDelay(Tetris.delay(j.val()));a(document).focus();e.start()})})(jQuery);