"use strict";(function(a){a(function(){var i=10,g=20,d=a("#stopGoButton"),h=a("#resetButton"),b=new Tetris.NextShapeDisplay(a("#nextShape")),c=a("#board"),e=new Tetris.Board(i,g,c),j=a("#speedSlider");var f={32:function(){e.drop()},37:function(){e.moveLeft()},38:function(){e.rotate(false)},39:function(){e.moveRight()},40:function(){e.fall()}};a("button, input[type=button], input[type=checkbox]").button();a(document).on("keydown",function(k){if(!e.isRunning()){return false}if((k.which||k.keyCode) in f){f[k.which||k.keyCode]();k.preventDefault();return true}return false});d.on("click",function(){e.toggleRunning();c.focus();a(document).focus()});h.on("click",function(){e.stop();d.removeAttr("disabled");e.clear();c.focus();a(document).focus()});j.slider({stop:function(){e.setDelay(Tetris.delay(j.slider("option","value")));c.focus();a(document).focus()}});c.on(Tetris.eventNames.rowsZapped,function(k,m){Tetris.sounds.rowsZapped.play();var l=j.slider("option","value");e.setDelay(Tetris.delay(l));j.slider("option","value",l+1)});c.on(Tetris.eventNames.nextShapeChanged,function(l,k){b.display(k)});c.on(Tetris.eventNames.shapeShowBlocked,function(k){e.stop();b.clear();d.attr("disabled","disabled");Tetris.sounds.shapeShowBlocked.play();a().toastmessage("showNoticeToast","Game over")});c.on(Tetris.eventNames.boardStarted,function(){d.val("Pause")});c.on(Tetris.eventNames.boardStopped,function(){d.val("Resume")});c.on(Tetris.eventNames.shapeFallBlocked,function(){Tetris.sounds.shapeFallBlocked.play()});e.setDelay(Tetris.delay(j.slider("option","value")));a(document).focus();e.start()})})(jQuery);